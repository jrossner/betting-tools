<!doctype HTML>
<html>
  <head>
  </head>
  <body>
    <a href='../index.html'>Back Home</a>
    <h1 style="text-align:center;">Expected Value Calculator</h1>
    <p>
      <h2>About</h2>
      If you know the probability of an outcome, and the odds offered, you can calculate the expected return % on a bet with this calculator.
      <br>
    </p>
    <p>
      <h2>The Calculator</h2>
      <form onsubmit="calcExpValue(); return false;">
        <label for="betodds">Betting Line: </label>
        <input type="number" id="betodds" name="betodds" min="-100000" max="10000000000" step="1" value="-110">
        <br>
        <label for="outcomeprob">Probability of outcome (between 0 and 1): </label>
        <input type="number" id="outcomeprob" name="outcomeprob" min="0" max="1" step=".01" value=".5">
        <br>
        <input type="submit" value="Calculate Expected Value">
        <br>
        <label for="res"><b>Expected Value: </b></label>
        <output type="text" name="result" id="result" for="res"></output>
      </form>
    </p>
    <script>
      function calcExpValue() {
        const betOdds = document.getElementById("betodds").value;
        const winProb = document.getElementById("outcomeprob").value;

        let expectedValue;
        let loseProb = 1 - winProb;
        let profitMultiple;
        
        if (betOdds >= 0) {
          profitMultiple = betOdds / 100;
        } else {
          profitMultiple = 100 / Math.abs(betOdds);
        }

        expectedValue = (profitMultiple * winProb) - loseProb;
        let prettyResult;
        if (expectedValue >= 0) {
          prettyResult = `+${Math.round(10000*expectedValue)/100}%`
        } else {
          prettyResult = `${Math.round(10000*expectedValue)/100}%`
        }

        document.getElementById("result").value = prettyResult;
      }
    </script>
  </body>
</html>
